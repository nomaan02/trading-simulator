{% extends "base.html" %}

{% block title %}Home - German30 Trading Simulator{% endblock %}

{% block content %}
<style>
    .hero {
        text-align: center;
        padding: var(--spacing-xl) var(--spacing-lg);
        max-width: 900px;
        margin: 0 auto;
    }

    .hero-title {
        font-size: 36px;
        font-weight: 700;
        margin-bottom: var(--spacing-md);
    }

    .hero-subtitle {
        font-size: var(--font-size-lg);
        color: var(--text-secondary);
        margin-bottom: var(--spacing-xl);
    }

    .hero-actions {
        display: flex;
        gap: var(--spacing-md);
        justify-content: center;
        margin-top: var(--spacing-xl);
    }

    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: var(--spacing-md);
        max-width: 1200px;
        margin: var(--spacing-xl) auto;
        padding: 0 var(--spacing-lg);
    }

    .recent-sessions {
        max-width: 1200px;
        margin: var(--spacing-xl) auto;
        padding: 0 var(--spacing-lg);
    }

    .sessions-list {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-md);
    }

    .session-card {
        background-color: var(--bg-panel);
        border: 1px solid var(--border-color);
        border-radius: var(--radius-md);
        padding: var(--spacing-lg);
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: border-color var(--transition-fast);
    }

    .session-card:hover {
        border-color: var(--accent-blue);
    }

    .session-info h4 {
        margin-bottom: var(--spacing-xs);
    }

    .session-meta {
        font-size: var(--font-size-sm);
        color: var(--text-secondary);
    }

    .session-stats {
        display: flex;
        gap: var(--spacing-lg);
        align-items: center;
    }

    .session-stat {
        text-align: center;
    }

    .session-stat-value {
        font-size: var(--font-size-xl);
        font-weight: 600;
        font-family: var(--font-mono);
    }

    .session-stat-label {
        font-size: var(--font-size-xs);
        color: var(--text-secondary);
        text-transform: uppercase;
    }

    .features {
        max-width: 1200px;
        margin: var(--spacing-xl) auto;
        padding: 0 var(--spacing-lg);
    }

    .features-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: var(--spacing-lg);
        margin-top: var(--spacing-lg);
    }

    .feature-card {
        background-color: var(--bg-panel);
        border: 1px solid var(--border-color);
        border-radius: var(--radius-md);
        padding: var(--spacing-lg);
    }

    .feature-icon {
        font-size: 32px;
        margin-bottom: var(--spacing-md);
    }

    .feature-title {
        font-size: var(--font-size-lg);
        font-weight: 600;
        margin-bottom: var(--spacing-sm);
    }

    .feature-description {
        font-size: var(--font-size-sm);
        color: var(--text-secondary);
    }
</style>

<div class="hero">
    <h1 class="hero-title">German30 Trading Strategy Simulator</h1>
    <p class="hero-subtitle">
        Master your DAX trading strategy with historical data replay.<br>
        Practice, analyze, and perfect your edge with Mon/Thu/Fri time windows.
    </p>

    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-value stat-neutral">{{ stats.total_sessions }}</div>
            <div class="stat-label">Total Sessions</div>
        </div>
        <div class="stat-card">
            <div class="stat-value stat-neutral">{{ stats.total_trades }}</div>
            <div class="stat-label">Total Trades</div>
        </div>
        <div class="stat-card">
            <div class="stat-value {% if stats.overall_win_rate >= 50 %}stat-positive{% else %}stat-negative{% endif %}">
                {{ stats.overall_win_rate }}%
            </div>
            <div class="stat-label">Win Rate</div>
        </div>
        <div class="stat-card">
            <div class="stat-value {% if stats.total_pnl >= 0 %}stat-positive{% else %}stat-negative{% endif %}">
                {{ stats.total_pnl|round(2) }} pts
            </div>
            <div class="stat-label">Total P&L</div>
        </div>
    </div>

    <div class="hero-actions">
        <a href="{{ url_for('views.simulator') }}" class="btn btn-primary btn-lg">
            Start Practice Session
        </a>
        <a href="{{ url_for('views.stats') }}" class="btn btn-secondary btn-lg">
            View Statistics
        </a>
    </div>
</div>

{% if recent_sessions %}
<div class="recent-sessions">
    <h2>Recent Practice Sessions</h2>
    <div class="sessions-list">
        {% for session in recent_sessions %}
        <div class="session-card">
            <div class="session-info">
                <h4>{{ session.time_window|upper }}</h4>
                <div class="session-meta">
                    {{ session.date_range_start.strftime('%B %d, %Y') }} -
                    {{ session.date_range_end.strftime('%B %d, %Y') }}
                    <span class="text-muted">‚Ä¢</span>
                    {{ session.created_at.strftime('%B %d, %Y') }}
                </div>
            </div>
            <div class="session-stats">
                <div class="session-stat">
                    <div class="session-stat-value stat-neutral">{{ session.total_trades }}</div>
                    <div class="session-stat-label">Trades</div>
                </div>
                <div class="session-stat">
                    <div class="session-stat-value {% if session.win_rate >= 50 %}stat-positive{% else %}stat-negative{% endif %}">
                        {{ session.win_rate|round(1) }}%
                    </div>
                    <div class="session-stat-label">Win Rate</div>
                </div>
                <div class="session-stat">
                    <div class="session-stat-value {% if session.total_pnl >= 0 %}stat-positive{% else %}stat-negative{% endif %}">
                        {{ session.total_pnl|round(2) }}
                    </div>
                    <div class="session-stat-label">P&L (pts)</div>
                </div>
                <a href="{{ url_for('views.simulator_session', session_id=session.id) }}" class="btn btn-sm btn-secondary">
                    {% if session.is_completed %}Review{% else %}Continue{% endif %}
                </a>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}

<div class="features">
    <h2 class="text-center">Key Features</h2>
    <div class="features-grid">
        <div class="feature-card">
            <div class="feature-icon">üìä</div>
            <h3 class="feature-title">Multi-Timeframe Analysis</h3>
            <p class="feature-description">
                View 4H, 1H, and 3-minute charts simultaneously to analyze context and execute with precision.
            </p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">‚èØÔ∏è</div>
            <h3 class="feature-title">Progressive Replay</h3>
            <p class="feature-description">
                Replay historical price action candle by candle to practice decision-making in real-time conditions.
            </p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">üéØ</div>
            <h3 class="feature-title">Strategy-Focused</h3>
            <p class="feature-description">
                Locked to Mon/Thu/Fri with specific time windows: 08:06-08:23, 09:06-09:23, 14:30-14:45, 15:06-15:23 BST.
            </p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">‚ö°</div>
            <h3 class="feature-title">Automatic R:R</h3>
            <p class="feature-description">
                Fixed 18-point SL and 54-point TP (1:3 RR) auto-calculated for consistent risk management practice.
            </p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">‚úèÔ∏è</div>
            <h3 class="feature-title">Drawing Tools</h3>
            <p class="feature-description">
                Mark support/resistance, order blocks, and key levels with horizontal lines, trends, and rectangles.
            </p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">üìà</div>
            <h3 class="feature-title">Performance Tracking</h3>
            <p class="feature-description">
                Comprehensive statistics including win rate, P&L curves, A-grade setup accuracy, and trade journal.
            </p>
        </div>
    </div>
</div>

{% endblock %}
